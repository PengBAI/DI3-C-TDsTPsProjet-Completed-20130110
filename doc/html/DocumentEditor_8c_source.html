<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Travaux pratiques de langage C: DocumentEditor.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Travaux pratiques de langage C&#160;<span id="projectnumber">1.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('DocumentEditor_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">DocumentEditor.c</div>  </div>
</div>
<div class="contents">
<a href="DocumentEditor_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright 2010 Sébastien Aupetit &lt;sebastien.aupetit@univ-tours.fr&gt;</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This source code is free software: you can redistribute it and/or modify it under</span>
<a name="l00005"></a>00005 <span class="comment"> * the terms of the GNU Lesser General Public License as published by the Free</span>
<a name="l00006"></a>00006 <span class="comment"> * Software Foundation, either version 3 of the License, or (at your option) any</span>
<a name="l00007"></a>00007 <span class="comment"> * later version.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This source code is distributed in the hope that it will be useful, but WITHOUT ANY</span>
<a name="l00010"></a>00010 <span class="comment"> * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR</span>
<a name="l00011"></a>00011 <span class="comment"> * A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more</span>
<a name="l00012"></a>00012 <span class="comment"> * details.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00015"></a>00015 <span class="comment"> * along with this source code. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * $Id: DocumentEditor.c 247 2010-09-10 10:23:07Z sebtic $</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;<a class="code" href="DocumentEditor_8h.html">DocumentEditor.h</a>&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;CustomerDB.h&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;<a class="code" href="Customer_8h.html">Customer.h</a>&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;gdk/gdkkeysyms.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;CatalogRecord.h&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Catalog_8h.html">Catalog.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;CatalogDB.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Print_8h.html">Print.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;DocumentRowList.h&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a><a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">00030</a> <span class="preprocessor">#define EDITOR_ROWCOUNT 4</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a><a class="code" href="structDocumentEditor.html">00032</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>_DocumentEditor {
<a name="l00033"></a><a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">00033</a>     <a class="code" href="structDocument.html" title="Structure representing a document.">Document</a> * <a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>;
<a name="l00034"></a><a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">00034</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a>;
<a name="l00035"></a><a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">00035</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>;
<a name="l00036"></a><a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">00036</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a>;
<a name="l00037"></a><a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">00037</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a>;
<a name="l00038"></a><a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">00038</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">objectEntry</a>;
<a name="l00039"></a><a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">00039</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a>;
<a name="l00040"></a><a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">00040</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>;
<a name="l00041"></a><a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">00041</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>;
<a name="l00042"></a><a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">00042</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>;
<a name="l00043"></a><a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">00043</a>     GtkWidget * codeEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00044"></a><a class="code" href="structDocumentEditor.html#a33841f62db8f532bb0ef62e74dc902ef">00044</a>     GtkWidget * catalogButton[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00045"></a><a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">00045</a>     GtkWidget * designationEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00046"></a><a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">00046</a>     GtkWidget * quantityEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00047"></a><a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">00047</a>     GtkWidget * unityEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00048"></a><a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">00048</a>     GtkWidget * basePriceEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00049"></a><a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">00049</a>     GtkWidget * sellingPriceEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00050"></a><a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">00050</a>     GtkWidget * discountEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00051"></a><a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">00051</a>     GtkWidget * finalPriceEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00052"></a><a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">00052</a>     GtkWidget * rateOfVATEntry[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00053"></a><a class="code" href="structDocumentEditor.html#a76324162e421482fbb2df449598658b3">00053</a>     GtkWidget * insertBeforeButton[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00054"></a><a class="code" href="structDocumentEditor.html#a4b107efa5021f3637c9783327ad12731">00054</a>     GtkWidget * insertAfterButton[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00055"></a><a class="code" href="structDocumentEditor.html#a5b6b150eb34bbe5c81b25bad436b67e0">00055</a>     GtkWidget * removeButton[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00056"></a><a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">00056</a>     GtkWidget * <a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>;
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="structDocumentEditor.html#a0e90aa36d438a50077714a4dd83c97e8">00058</a>     gulong quantity_insert_text_handler[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00059"></a><a class="code" href="structDocumentEditor.html#a00867179ae080fe0b74e5a51ec09851e">00059</a>     gulong basePrice_insert_text_handler[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00060"></a><a class="code" href="structDocumentEditor.html#a2436a93f3b2187f133029e31ceccfc88">00060</a>     gulong sellingPrice_insert_text_handler[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00061"></a><a class="code" href="structDocumentEditor.html#ae13a89f21584af4f381daf4713e48c1c">00061</a>     gulong discount_insert_text_handler[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00062"></a><a class="code" href="structDocumentEditor.html#a7a79670da58461459aef2d98dc6a3818">00062</a>     gulong rateOfVAT_insert_text_handler[<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>];
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 } <a class="code" href="structDocumentEditor.html">DocumentEditor</a>;
<a name="l00065"></a>00065 
<a name="l00066"></a><a class="code" href="DocumentEditor_8c.html#a9a09191202e11abcc4b9b090616cde83">00066</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="DocumentEditor_8c.html#a9a09191202e11abcc4b9b090616cde83">isPositiveNumber</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * value) {
<a name="l00067"></a>00067     <span class="keywordtype">char</span> * end = NULL;
<a name="l00068"></a>00068     <span class="keywordtype">double</span> val = strtod(value, &amp;end);
<a name="l00069"></a>00069     <span class="keywordflow">return</span> (end != value &amp;&amp; *end == <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; val &gt;= 0);
<a name="l00070"></a>00070 }
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="DocumentEditor_8c.html#a91241530b92c420923786dcda88c1425">00072</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#a91241530b92c420923786dcda88c1425">DocumentEditor_setCustomer</a>(<a class="code" href="structCustomerRecord.html" title="A customer record.">CustomerRecord</a> * record, GtkWidget * customerViewer) {
<a name="l00073"></a>00073     GtkTextIter iter;
<a name="l00074"></a>00074     GtkTextBuffer *buffer = gtk_text_view_get_buffer(GTK_TEXT_VIEW (customerViewer));
<a name="l00075"></a>00075 
<a name="l00076"></a>00076     gtk_text_buffer_set_text(buffer, <span class="stringliteral">&quot;&quot;</span>, -1);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     gtk_text_buffer_get_iter_at_offset(buffer, &amp;iter, -1);
<a name="l00079"></a>00079     gtk_text_buffer_insert(buffer, &amp;iter, record-&gt;<a class="code" href="structCustomerRecord.html#a479b51f76b74245617707fc5e9f38da0" title="The name.">name</a>, -1);
<a name="l00080"></a>00080     gtk_text_buffer_insert(buffer, &amp;iter, <span class="stringliteral">&quot;\n&quot;</span>, -1);
<a name="l00081"></a>00081     gtk_text_buffer_insert(buffer, &amp;iter, record-&gt;<a class="code" href="structCustomerRecord.html#a666f073c79b58211733013b9e7217567" title="The address.">address</a>, -1);
<a name="l00082"></a>00082     gtk_text_buffer_insert(buffer, &amp;iter, <span class="stringliteral">&quot;\n&quot;</span>, -1);
<a name="l00083"></a>00083     gtk_text_buffer_insert(buffer, &amp;iter, record-&gt;<a class="code" href="structCustomerRecord.html#abc78132ec841694bdd43cd0033dc4c3f" title="The postal code.">postalCode</a>, -1);
<a name="l00084"></a>00084     gtk_text_buffer_insert(buffer, &amp;iter, <span class="stringliteral">&quot; &quot;</span>, -1);
<a name="l00085"></a>00085     gtk_text_buffer_insert(buffer, &amp;iter, record-&gt;<a class="code" href="structCustomerRecord.html#a30a63918799464a65616e4b159126e66" title="The Town.">town</a>, -1);
<a name="l00086"></a>00086 }
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="DocumentEditor_8c.html#a382c9588a91d07fd7654c90f80efdd22">00088</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#a382c9588a91d07fd7654c90f80efdd22">DocumentEditor_chooseCustomer</a>(GtkWidget * <a class="code" href="provided_2include_2base_2Config_8h.html#a0bdd8a945caf2eb28640128d1fed930c" title="Copyright 2010 Sébastien Aupetit &lt;sebastien.aupetit@univ-tours.fr&gt;">UNUSED</a>( button),
<a name="l00089"></a>00089         <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00090"></a>00090     <span class="keywordtype">int</span> choix = <a class="code" href="group__Customer.html#ga3e50d0392f66722076c8474e8b99a286" title="Select a customer in the list of customers.">Customer_select</a>(NULL);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092     <span class="keywordflow">if</span> (choix != -1) {
<a name="l00093"></a>00093         <a class="code" href="structCustomerDB.html" title="The structure which represents an opened customer database.">CustomerDB</a> * customerDB = <a class="code" href="group__CustomerDB.html#ga1c2b5cee888f572992b21f323039ef18" title="Open an existing database of customers.">CustomerDB_open</a>(<a class="code" href="group__CustomerDB.html#gad5f7d3454b595fab6dbd14470e96098b" title="The customer database file name.">CUSTOMERDB_FILENAME</a>);
<a name="l00094"></a>00094         <span class="keywordflow">if</span> (customerDB == NULL)
<a name="l00095"></a>00095             <a class="code" href="provided_2include_2base_2Config_8h.html#ae16aac0ba57287421b17ec5b85812c3e" title="Function which displays a message before terminating the program.">fatalError</a>(<span class="stringliteral">&quot;DocumentEditor_ChooseCustomer&quot;</span>);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097         <a class="code" href="group__CustomerDB.html#ga03605b3b1a76149b39e2d9aa72a508d5" title="Read a record from the database.">CustomerDB_readRecord</a>(customerDB, choix, &amp;documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>-&gt;<a class="code" href="structDocument.html#ae09cf2ecc5299bb3926980664c473fd3" title="The customer.">customer</a>);
<a name="l00098"></a>00098         <a class="code" href="DocumentEditor_8c.html#a91241530b92c420923786dcda88c1425">DocumentEditor_setCustomer</a>(&amp;documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>-&gt;<a class="code" href="structDocument.html#ae09cf2ecc5299bb3926980664c473fd3" title="The customer.">customer</a>,
<a name="l00099"></a>00099                 documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a>);
<a name="l00100"></a>00100         <a class="code" href="group__CustomerDB.html#ga49ad4472c10433a5bcb111ddf7a5d56b" title="Flush cached data, close a database and free the structure representing the opened database...">CustomerDB_close</a>(customerDB);
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102 }
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">00104</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">DocumentEditor_getEntryOffset</a>(<a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor, GtkWidget * entry) {
<a name="l00105"></a>00105     <span class="keywordtype">int</span> i;
<a name="l00106"></a>00106     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>; ++i) {
<a name="l00107"></a>00107         <span class="keywordflow">if</span> (entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i] || entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i]
<a name="l00108"></a>00108                 || entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i] || entry
<a name="l00109"></a>00109                 == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i] || entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i]
<a name="l00110"></a>00110                 || entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i] || entry
<a name="l00111"></a>00111                 == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i] || entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i]
<a name="l00112"></a>00112                 || entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i] || entry
<a name="l00113"></a>00113                 == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a33841f62db8f532bb0ef62e74dc902ef">catalogButton</a>[i] || entry
<a name="l00114"></a>00114                 == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a76324162e421482fbb2df449598658b3">insertBeforeButton</a>[i] || entry
<a name="l00115"></a>00115                 == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4b107efa5021f3637c9783327ad12731">insertAfterButton</a>[i] || entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a5b6b150eb34bbe5c81b25bad436b67e0">removeButton</a>[i])
<a name="l00116"></a>00116             <span class="keywordflow">return</span> i;
<a name="l00117"></a>00117     }
<a name="l00118"></a>00118     <span class="keywordflow">return</span> -1;
<a name="l00119"></a>00119 }
<a name="l00120"></a>00120 
<a name="l00121"></a><a class="code" href="DocumentEditor_8c.html#a9b54de875ddc3fb33f61b92073261431">00121</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#a9b54de875ddc3fb33f61b92073261431">DocumentEditor_saveData</a>(<a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor, <span class="keywordtype">int</span> first) {
<a name="l00122"></a>00122     <span class="keywordtype">int</span> i;
<a name="l00123"></a>00123     <a class="code" href="structDocument.html" title="Structure representing a document.">Document</a> * document = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>;
<a name="l00124"></a>00124     <span class="comment">/* Phase 1 */</span>
<a name="l00125"></a>00125     free(document-&gt;<a class="code" href="structDocument.html#ad473f0686021470bca3be3ceae698139" title="The peremption date.">expiryDate</a>);
<a name="l00126"></a>00126     free(document-&gt;<a class="code" href="structDocument.html#a698139783a57ed0223f42bff714b914b" title="The object of the document.">object</a>);
<a name="l00127"></a>00127     document-&gt;<a class="code" href="structDocument.html#ad473f0686021470bca3be3ceae698139" title="The peremption date.">expiryDate</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(gtk_entry_get_text(
<a name="l00128"></a>00128             GTK_ENTRY(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a>)));
<a name="l00129"></a>00129     document-&gt;<a class="code" href="structDocument.html#a698139783a57ed0223f42bff714b914b" title="The object of the document.">object</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(gtk_entry_get_text(GTK_ENTRY(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">objectEntry</a>)));
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     <span class="comment">/* Phase 2 : les lignes */</span>
<a name="l00132"></a>00132     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>; ++i) {
<a name="l00133"></a>00133         <a class="code" href="structDocumentRow.html" title="Structure representing a row in a document (as a cell in a simple linked list.">DocumentRow</a> * row = <a class="code" href="group__DocumentRowList.html#gac15557719c72aeb2e8d5c3d7a0574f97" title="Get a pointer on the rowIndex-th row of the list.">DocumentRowList_get</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, first + i);
<a name="l00134"></a>00134         <span class="keywordflow">if</span> (row != NULL) {
<a name="l00135"></a>00135             free(row-&gt;<a class="code" href="structDocumentRow.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code.">code</a>);
<a name="l00136"></a>00136             row-&gt;<a class="code" href="structDocumentRow.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code.">code</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(
<a name="l00137"></a>00137                     gtk_entry_get_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i])));
<a name="l00138"></a>00138             free(row-&gt;<a class="code" href="structDocumentRow.html#a238af89adb357ae219950bae456a4d07" title="The designation.">designation</a>);
<a name="l00139"></a>00139             row-&gt;<a class="code" href="structDocumentRow.html#a238af89adb357ae219950bae456a4d07" title="The designation.">designation</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(gtk_entry_get_text(
<a name="l00140"></a>00140                     GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i])));
<a name="l00141"></a>00141             free(row-&gt;<a class="code" href="structDocumentRow.html#a9e8ebe5266edb99433e33a7e8b8956ce" title="The unity.">unity</a>);
<a name="l00142"></a>00142             row-&gt;<a class="code" href="structDocumentRow.html#a9e8ebe5266edb99433e33a7e8b8956ce" title="The unity.">unity</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(gtk_entry_get_text(
<a name="l00143"></a>00143                     GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i])));
<a name="l00144"></a>00144             row-&gt;<a class="code" href="structDocumentRow.html#a42a7cbf17ad499bb36ad798c4bb46973" title="The quantity.">quantity</a> = atof(gtk_entry_get_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i])));
<a name="l00145"></a>00145             row-&gt;<a class="code" href="structDocumentRow.html#aa202ff7ac9da4792e13c732cecd057cd" title="The base price.">basePrice</a>
<a name="l00146"></a>00146                     = atof(gtk_entry_get_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i])));
<a name="l00147"></a>00147             row-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a> = atof(gtk_entry_get_text(
<a name="l00148"></a>00148                     GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i])));
<a name="l00149"></a>00149             row-&gt;<a class="code" href="structDocumentRow.html#a53313c66e4ab6acce975994de1d9c097" title="The discount.">discount</a> = atof(gtk_entry_get_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i])));
<a name="l00150"></a>00150             row-&gt;<a class="code" href="structDocumentRow.html#a9b94cceae6d68929f7e6065540058f1d" title="The rate of VAT.">rateOfVAT</a>
<a name="l00151"></a>00151                     = atof(gtk_entry_get_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i])));
<a name="l00152"></a>00152         }
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 }
<a name="l00156"></a>00156 
<a name="l00157"></a><a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">00157</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(<a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor, <span class="keywordtype">int</span> first) {
<a name="l00158"></a>00158     <span class="keywordtype">int</span> i;
<a name="l00159"></a>00159     <span class="keywordtype">double</span> sumWithoutVAT = 0;
<a name="l00160"></a>00160     <span class="keywordtype">double</span> sumOfVAT = 0;
<a name="l00161"></a>00161     <span class="keywordtype">double</span> sumWithVAT = 0;
<a name="l00162"></a>00162     <span class="keywordtype">double</span> ht;
<a name="l00163"></a>00163     <span class="keywordtype">char</span> buf[1024];
<a name="l00164"></a>00164     <span class="keywordtype">int</span> rowCount;
<a name="l00165"></a>00165     <a class="code" href="structDocument.html" title="Structure representing a document.">Document</a> * document = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>;
<a name="l00166"></a>00166     <a class="code" href="structDocumentRow.html" title="Structure representing a row in a document (as a cell in a simple linked list.">DocumentRow</a> * cur;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168     <span class="comment">/* Phase 1 : entete */</span>
<a name="l00169"></a>00169     <a class="code" href="DocumentEditor_8c.html#a91241530b92c420923786dcda88c1425">DocumentEditor_setCustomer</a>(&amp;document-&gt;<a class="code" href="structDocument.html#ae09cf2ecc5299bb3926980664c473fd3" title="The customer.">customer</a>, documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a>);
<a name="l00170"></a>00170     gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a>), document-&gt;<a class="code" href="structDocument.html#a4929e9d61af65aab9bcf3eae097f2555" title="The last operator.">operator</a>);
<a name="l00171"></a>00171     gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>), document-&gt;<a class="code" href="structDocument.html#a312899691f7ecdb742ca28504d7238c5" title="The last edit data.">editDate</a>);
<a name="l00172"></a>00172     gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a>), document-&gt;<a class="code" href="structDocument.html#ad473f0686021470bca3be3ceae698139" title="The peremption date.">expiryDate</a>);
<a name="l00173"></a>00173     gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a>), document-&gt;<a class="code" href="structDocument.html#a1606cdf3e0822d63297a546f4f0172dc" title="The document number.">docNumber</a>);
<a name="l00174"></a>00174     gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">objectEntry</a>), document-&gt;<a class="code" href="structDocument.html#a698139783a57ed0223f42bff714b914b" title="The object of the document.">object</a>);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="comment">/* Phase 2 : les lignes */</span>
<a name="l00177"></a>00177     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>; ++i) {
<a name="l00178"></a>00178         <a class="code" href="structDocumentRow.html" title="Structure representing a row in a document (as a cell in a simple linked list.">DocumentRow</a> * row = <a class="code" href="group__DocumentRowList.html#gac15557719c72aeb2e8d5c3d7a0574f97" title="Get a pointer on the rowIndex-th row of the list.">DocumentRowList_get</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, first + i);
<a name="l00179"></a>00179         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i], row != NULL);
<a name="l00180"></a>00180         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i], row != NULL);
<a name="l00181"></a>00181         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i], row != NULL);
<a name="l00182"></a>00182         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i], row != NULL);
<a name="l00183"></a>00183         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i], row != NULL);
<a name="l00184"></a>00184         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i], row != NULL);
<a name="l00185"></a>00185         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i], row != NULL);
<a name="l00186"></a>00186         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i], row != NULL);
<a name="l00187"></a>00187         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i], row != NULL);
<a name="l00188"></a>00188         <span class="keywordflow">if</span> (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a33841f62db8f532bb0ef62e74dc902ef">catalogButton</a>[i] != NULL)
<a name="l00189"></a>00189             gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a33841f62db8f532bb0ef62e74dc902ef">catalogButton</a>[i], row != NULL);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191         <span class="keywordflow">if</span> (row == NULL) {
<a name="l00192"></a>00192             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00193"></a>00193             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00194"></a>00194             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00195"></a>00195             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00196"></a>00196             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00197"></a>00197             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00198"></a>00198             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00199"></a>00199             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00200"></a>00200             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i]), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202         } <span class="keywordflow">else</span> {
<a name="l00203"></a>00203             GdkColor color;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i]), row-&gt;<a class="code" href="structDocumentRow.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code.">code</a>);
<a name="l00206"></a>00206             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i]), row-&gt;<a class="code" href="structDocumentRow.html#a238af89adb357ae219950bae456a4d07" title="The designation.">designation</a>);
<a name="l00207"></a>00207             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i]), row-&gt;<a class="code" href="structDocumentRow.html#a9e8ebe5266edb99433e33a7e8b8956ce" title="The unity.">unity</a>);
<a name="l00208"></a>00208             sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) (row-&gt;<a class="code" href="structDocumentRow.html#a42a7cbf17ad499bb36ad798c4bb46973" title="The quantity.">quantity</a>));
<a name="l00209"></a>00209             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i]), buf);
<a name="l00210"></a>00210             gtk_entry_set_editable(GTK_ENTRY(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i]), <a class="code" href="group__String.html#ga6b5d9a1031ac2602e31df1ba551bfafe">strcmp</a>(row-&gt;<a class="code" href="structDocumentRow.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code.">code</a>,
<a name="l00211"></a>00211                     <span class="stringliteral">&quot;&quot;</span>) == 0);
<a name="l00212"></a>00212             sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) (row-&gt;<a class="code" href="structDocumentRow.html#aa202ff7ac9da4792e13c732cecd057cd" title="The base price.">basePrice</a>));
<a name="l00213"></a>00213             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i]), buf);
<a name="l00214"></a>00214             sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) (row-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a>));
<a name="l00215"></a>00215             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i]), buf);
<a name="l00216"></a>00216             sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) (row-&gt;<a class="code" href="structDocumentRow.html#a53313c66e4ab6acce975994de1d9c097" title="The discount.">discount</a>));
<a name="l00217"></a>00217             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i]), buf);
<a name="l00218"></a>00218             sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) (row-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a> - row-&gt;<a class="code" href="structDocumentRow.html#a53313c66e4ab6acce975994de1d9c097" title="The discount.">discount</a>));
<a name="l00219"></a>00219             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i]), buf);
<a name="l00220"></a>00220             sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) (row-&gt;<a class="code" href="structDocumentRow.html#a9b94cceae6d68929f7e6065540058f1d" title="The rate of VAT.">rateOfVAT</a>));
<a name="l00221"></a>00221             gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i]), buf);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223             <span class="keywordflow">if</span> (row-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a> - row-&gt;<a class="code" href="structDocumentRow.html#a53313c66e4ab6acce975994de1d9c097" title="The discount.">discount</a> &lt; 0 || row-&gt;<a class="code" href="structDocumentRow.html#aa202ff7ac9da4792e13c732cecd057cd" title="The base price.">basePrice</a> &gt; row-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a> || row-&gt;<a class="code" href="structDocumentRow.html#aa202ff7ac9da4792e13c732cecd057cd" title="The base price.">basePrice</a> &gt; (row-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a> - row-&gt;<a class="code" href="structDocumentRow.html#a53313c66e4ab6acce975994de1d9c097" title="The discount.">discount</a>))
<a name="l00224"></a>00224                 gdk_color_parse(<span class="stringliteral">&quot;red&quot;</span>, &amp;color);
<a name="l00225"></a>00225             <span class="keywordflow">else</span>
<a name="l00226"></a>00226                 gdk_color_parse(<span class="stringliteral">&quot;black&quot;</span>, &amp;color);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228             gtk_widget_modify_text(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i], GTK_STATE_NORMAL, &amp;color);
<a name="l00229"></a>00229             gtk_widget_modify_text(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i], GTK_STATE_NORMAL, &amp;color);
<a name="l00230"></a>00230             gtk_widget_modify_text(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i], GTK_STATE_NORMAL, &amp;color);
<a name="l00231"></a>00231         }
<a name="l00232"></a>00232     }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     rowCount = <a class="code" href="group__DocumentRowList.html#gaaef8bf84762b5502e9d3c27dd84f4bfd" title="Get the number of rows in the list.">DocumentRowList_getRowCount</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>);
<a name="l00235"></a>00235     <span class="keywordflow">if</span> (rowCount &gt; 0) {
<a name="l00236"></a>00236         gtk_range_set_range(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), 0, rowCount);
<a name="l00237"></a>00237         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>, TRUE);
<a name="l00238"></a>00238     } <span class="keywordflow">else</span>
<a name="l00239"></a>00239         gtk_widget_set_sensitive(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>, FALSE);
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="comment">/* Phase 3 : les totaux */</span>
<a name="l00242"></a>00242     cur = document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>;
<a name="l00243"></a>00243     <span class="keywordflow">while</span> (cur != NULL) {
<a name="l00244"></a>00244         ht = (cur-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a> - cur-&gt;<a class="code" href="structDocumentRow.html#a53313c66e4ab6acce975994de1d9c097" title="The discount.">discount</a>) * cur-&gt;<a class="code" href="structDocumentRow.html#a42a7cbf17ad499bb36ad798c4bb46973" title="The quantity.">quantity</a>;
<a name="l00245"></a>00245         sumWithoutVAT += ht;
<a name="l00246"></a>00246         sumOfVAT += ht * cur-&gt;<a class="code" href="structDocumentRow.html#a9b94cceae6d68929f7e6065540058f1d" title="The rate of VAT.">rateOfVAT</a> / 100.;
<a name="l00247"></a>00247         sumWithVAT += ht * (1. + cur-&gt;<a class="code" href="structDocumentRow.html#a9b94cceae6d68929f7e6065540058f1d" title="The rate of VAT.">rateOfVAT</a> / 100.);
<a name="l00248"></a>00248         cur = cur-&gt;<a class="code" href="structDocumentRow.html#ab8e4a43b29c4ba6631b64a7172297c3c" title="The pointer to the next row.">next</a>;
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250 
<a name="l00251"></a>00251     sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) sumWithoutVAT);
<a name="l00252"></a>00252     gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>), buf);
<a name="l00253"></a>00253     sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) sumOfVAT);
<a name="l00254"></a>00254     gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>), buf);
<a name="l00255"></a>00255     sprintf(buf, <span class="stringliteral">&quot;%.2f&quot;</span>, (<span class="keywordtype">double</span>) sumWithVAT);
<a name="l00256"></a>00256     gtk_entry_set_text(GTK_ENTRY (documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>), buf);
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a><a class="code" href="DocumentEditor_8c.html#a68b46b5e676a2723192f4d4a5eb53446">00259</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#a68b46b5e676a2723192f4d4a5eb53446">DocumentEditor_insert_text_handler_positiveNumeric</a>(GtkWidget *entry, <span class="keyword">const</span> gchar *text,
<a name="l00260"></a>00260         gint length, gint *position, <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00261"></a>00261     <span class="keyword">const</span> <span class="keywordtype">char</span> * allText = gtk_entry_get_text(GTK_ENTRY(entry));
<a name="l00262"></a>00262     <span class="keywordtype">char</span> * result = <a class="code" href="group__String.html#ga3131b6ede1444bb8a37b873c1fd12596" title="Create a new string on the heap which contents is the result of the insertion in src of insertLength ...">insertString</a>(allText, *position, text, length);
<a name="l00263"></a>00263     <span class="keywordtype">int</span> offset = <a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">DocumentEditor_getEntryOffset</a>(documentEditor, entry);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     GtkEditable *editable = GTK_EDITABLE(entry);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267     <span class="keywordflow">if</span> (<a class="code" href="DocumentEditor_8c.html#a9a09191202e11abcc4b9b090616cde83">isPositiveNumber</a>(result)) {
<a name="l00268"></a>00268         gulong handler = 0;
<a name="l00269"></a>00269         <span class="keywordflow">if</span> (entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[offset])
<a name="l00270"></a>00270             handler = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a00867179ae080fe0b74e5a51ec09851e">basePrice_insert_text_handler</a>[offset];
<a name="l00271"></a>00271         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[offset])
<a name="l00272"></a>00272             handler = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ae13a89f21584af4f381daf4713e48c1c">discount_insert_text_handler</a>[offset];
<a name="l00273"></a>00273         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[offset])
<a name="l00274"></a>00274             handler = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a0e90aa36d438a50077714a4dd83c97e8">quantity_insert_text_handler</a>[offset];
<a name="l00275"></a>00275         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[offset])
<a name="l00276"></a>00276             handler = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a7a79670da58461459aef2d98dc6a3818">rateOfVAT_insert_text_handler</a>[offset];
<a name="l00277"></a>00277         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry == documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[offset])
<a name="l00278"></a>00278             handler = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a2436a93f3b2187f133029e31ceccfc88">sellingPrice_insert_text_handler</a>[offset];
<a name="l00279"></a>00279 
<a name="l00280"></a>00280         g_signal_handler_block(G_OBJECT (editable), handler);
<a name="l00281"></a>00281         gtk_editable_insert_text(editable, text, length, position);
<a name="l00282"></a>00282         g_signal_handler_unblock(G_OBJECT (editable), handler);
<a name="l00283"></a>00283     }
<a name="l00284"></a>00284     g_signal_stop_emission_by_name(G_OBJECT (editable), <span class="stringliteral">&quot;insert_text&quot;</span>);
<a name="l00285"></a>00285     free(result);
<a name="l00286"></a>00286 }
<a name="l00287"></a>00287 
<a name="l00288"></a><a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">00288</a> gboolean <a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>(GtkWidget * <a class="code" href="provided_2include_2base_2Config_8h.html#a0bdd8a945caf2eb28640128d1fed930c" title="Copyright 2010 Sébastien Aupetit &lt;sebastien.aupetit@univ-tours.fr&gt;">UNUSED</a>( widget), GdkEventFocus * <a class="code" href="provided_2include_2base_2Config_8h.html#a0bdd8a945caf2eb28640128d1fed930c" title="Copyright 2010 Sébastien Aupetit &lt;sebastien.aupetit@univ-tours.fr&gt;">UNUSED</a>( event),
<a name="l00289"></a>00289         <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00290"></a>00290     <span class="keywordtype">int</span> first = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="keywordflow">if</span> (first != -1) {
<a name="l00293"></a>00293         <a class="code" href="DocumentEditor_8c.html#a9b54de875ddc3fb33f61b92073261431">DocumentEditor_saveData</a>(documentEditor, first);
<a name="l00294"></a>00294         <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00295"></a>00295     } <span class="keywordflow">else</span>
<a name="l00296"></a>00296         fprintf(stderr, <span class="stringliteral">&quot;DocumentEditor_HandleFocusOut must not be called here\n&quot;</span>);
<a name="l00297"></a>00297     <span class="keywordflow">return</span> FALSE;
<a name="l00298"></a>00298 }
<a name="l00299"></a>00299 
<a name="l00300"></a><a class="code" href="DocumentEditor_8c.html#a23e0f6ca38e1fd737552dc1d19c6547b">00300</a> <span class="keyword">static</span> gboolean <a class="code" href="DocumentEditor_8c.html#a23e0f6ca38e1fd737552dc1d19c6547b">DocumentEditor_handleFirstEntry</a>(GtkWidget *entry, GdkEventKey * event,
<a name="l00301"></a>00301         <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00302"></a>00302 
<a name="l00303"></a>00303     <span class="keywordflow">if</span> (event-&gt;keyval == GDK_ISO_Left_Tab) {
<a name="l00304"></a>00304         <span class="keywordtype">int</span> first = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00305"></a>00305         <span class="keywordtype">int</span> offset = <a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">DocumentEditor_getEntryOffset</a>(documentEditor, entry);
<a name="l00306"></a>00306         <span class="keywordflow">if</span> (offset == 0) {
<a name="l00307"></a>00307             <span class="keywordflow">if</span> (first &gt; 0) {
<a name="l00308"></a>00308                 <a class="code" href="DocumentEditor_8c.html#a9b54de875ddc3fb33f61b92073261431">DocumentEditor_saveData</a>(documentEditor, first);
<a name="l00309"></a>00309                 first--;
<a name="l00310"></a>00310                 <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00311"></a>00311                 gtk_range_set_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), first);
<a name="l00312"></a>00312                 gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[0]);
<a name="l00313"></a>00313             }
<a name="l00314"></a>00314             <span class="keywordflow">return</span> TRUE; <span class="comment">/* Stop other handler */</span>
<a name="l00315"></a>00315         }
<a name="l00316"></a>00316     }
<a name="l00317"></a>00317     <span class="keywordflow">return</span> FALSE;
<a name="l00318"></a>00318 }
<a name="l00319"></a>00319 
<a name="l00320"></a><a class="code" href="DocumentEditor_8c.html#ac6cb97240bd54f50989f514dbcf5e817">00320</a> <span class="keyword">static</span> gboolean <a class="code" href="DocumentEditor_8c.html#ac6cb97240bd54f50989f514dbcf5e817">DocumentEditor_handleLastEntry</a>(GtkWidget *entry, GdkEventKey * event,
<a name="l00321"></a>00321         <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00322"></a>00322 
<a name="l00323"></a>00323     <span class="keywordflow">if</span> (event-&gt;keyval == GDK_Tab || event-&gt;keyval == GDK_Return) {
<a name="l00324"></a>00324         <span class="keywordtype">int</span> first = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00325"></a>00325         <span class="keywordtype">int</span> offset = <a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">DocumentEditor_getEntryOffset</a>(documentEditor, entry);
<a name="l00326"></a>00326         <span class="keywordflow">if</span> (offset != -1) {
<a name="l00327"></a>00327             <span class="keywordflow">if</span> (first + offset == <a class="code" href="group__DocumentRowList.html#gaaef8bf84762b5502e9d3c27dd84f4bfd" title="Get the number of rows in the list.">DocumentRowList_getRowCount</a>(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>) - 1) {
<a name="l00328"></a>00328                 <a class="code" href="DocumentEditor_8c.html#a9b54de875ddc3fb33f61b92073261431">DocumentEditor_saveData</a>(documentEditor, first);
<a name="l00329"></a>00329                 <a class="code" href="group__DocumentRowList.html#ga4baa6fdf84d69c7f8711f0c598337a6c" title="Add a row at the end of the list.">DocumentRowList_pushBack</a>(&amp;documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, <a class="code" href="group__DocumentRowList.html#gaaac900c5bc48cdc51ada7f2573287d7e" title="Create a new row on the heap and initialize it.">DocumentRow_create</a>());
<a name="l00330"></a>00330                 offset++;
<a name="l00331"></a>00331                 <span class="keywordflow">if</span> (offset &gt;= <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>) {
<a name="l00332"></a>00332                     offset = <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a> - 1;
<a name="l00333"></a>00333                     first++;
<a name="l00334"></a>00334                 }
<a name="l00335"></a>00335                 <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00336"></a>00336                 gtk_range_set_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), first);
<a name="l00337"></a>00337                 gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[offset]);
<a name="l00338"></a>00338                 <span class="keywordflow">return</span> TRUE; <span class="comment">/* Stop other handler */</span>
<a name="l00339"></a>00339             }
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342     <span class="keywordflow">return</span> FALSE;
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="DocumentEditor_8c.html#a37b0272a5a2b86a525e9f5a83161367f">00345</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#a37b0272a5a2b86a525e9f5a83161367f">DocumentEditor_scrollbarChanged</a>(GtkWidget * <a class="code" href="provided_2include_2base_2Config_8h.html#a0bdd8a945caf2eb28640128d1fed930c" title="Copyright 2010 Sébastien Aupetit &lt;sebastien.aupetit@univ-tours.fr&gt;">UNUSED</a>( scrollbar),
<a name="l00346"></a>00346         <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00347"></a>00347     <span class="keywordtype">int</span> first = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00348"></a>00348     <span class="keywordflow">if</span> (first &gt;= 0) {
<a name="l00349"></a>00349         <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351 }
<a name="l00352"></a>00352 
<a name="l00353"></a><a class="code" href="DocumentEditor_8c.html#ab48928b00520019ae4b9c630b4d07543">00353</a> <span class="keyword">static</span> gboolean <a class="code" href="DocumentEditor_8c.html#ab48928b00520019ae4b9c630b4d07543">DocumentEditor_scrollbarBeforeChange</a>(GtkRange * <a class="code" href="provided_2include_2base_2Config_8h.html#a0bdd8a945caf2eb28640128d1fed930c" title="Copyright 2010 Sébastien Aupetit &lt;sebastien.aupetit@univ-tours.fr&gt;">UNUSED</a>( range),
<a name="l00354"></a>00354         GtkScrollType <a class="code" href="provided_2include_2base_2Config_8h.html#a0bdd8a945caf2eb28640128d1fed930c" title="Copyright 2010 Sébastien Aupetit &lt;sebastien.aupetit@univ-tours.fr&gt;">UNUSED</a>( scroll), gdouble <a class="code" href="provided_2include_2base_2Config_8h.html#a0bdd8a945caf2eb28640128d1fed930c" title="Copyright 2010 Sébastien Aupetit &lt;sebastien.aupetit@univ-tours.fr&gt;">UNUSED</a>( value), <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00355"></a>00355     <span class="keywordtype">int</span> firstBefore = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00356"></a>00356 
<a name="l00357"></a>00357     <span class="keywordflow">if</span> (firstBefore &gt;= 0) {
<a name="l00358"></a>00358         <a class="code" href="DocumentEditor_8c.html#a9b54de875ddc3fb33f61b92073261431">DocumentEditor_saveData</a>(documentEditor, firstBefore);
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360     <span class="keywordflow">return</span> FALSE;
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00363"></a><a class="code" href="DocumentEditor_8c.html#adc2b8be4cfa2bcce89e5669f300c86f1">00363</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#adc2b8be4cfa2bcce89e5669f300c86f1">DocumentEditor_insertBefore</a>(GtkWidget * button, <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00364"></a>00364     <a class="code" href="structDocument.html" title="Structure representing a document.">Document</a> * document = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>;
<a name="l00365"></a>00365     <span class="keywordtype">int</span> first = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00366"></a>00366     <span class="keywordtype">int</span> offset = <a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">DocumentEditor_getEntryOffset</a>(documentEditor, button);
<a name="l00367"></a>00367 
<a name="l00368"></a>00368     <a class="code" href="structDocumentRow.html" title="Structure representing a row in a document (as a cell in a simple linked list.">DocumentRow</a> * row = <a class="code" href="group__DocumentRowList.html#gac15557719c72aeb2e8d5c3d7a0574f97" title="Get a pointer on the rowIndex-th row of the list.">DocumentRowList_get</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, first + offset);
<a name="l00369"></a>00369     <span class="keywordflow">if</span> (row != NULL) {
<a name="l00370"></a>00370         <a class="code" href="group__DocumentRowList.html#gacb4efb0a2afca928f543d6ffd9750a48" title="Insert a row before a given row.">DocumentRowList_insertBefore</a>(&amp;document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, row, <a class="code" href="group__DocumentRowList.html#gaaac900c5bc48cdc51ada7f2573287d7e" title="Create a new row on the heap and initialize it.">DocumentRow_create</a>());
<a name="l00371"></a>00371         <span class="keywordflow">if</span> (offset == 0) {
<a name="l00372"></a>00372             <span class="keywordflow">if</span> (first &gt; 0)
<a name="l00373"></a>00373                 first--;
<a name="l00374"></a>00374             <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00375"></a>00375             gtk_range_set_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), first);
<a name="l00376"></a>00376             gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[offset]);
<a name="l00377"></a>00377         } <span class="keywordflow">else</span> {
<a name="l00378"></a>00378             offset--;
<a name="l00379"></a>00379             <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00380"></a>00380             gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[offset]);
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382     }
<a name="l00383"></a>00383 }
<a name="l00384"></a>00384 
<a name="l00385"></a><a class="code" href="DocumentEditor_8c.html#ac278d479846e19541df5b11c0cdb5c81">00385</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#ac278d479846e19541df5b11c0cdb5c81">DocumentEditor_insertAfter</a>(GtkWidget * button, <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00386"></a>00386     <a class="code" href="structDocument.html" title="Structure representing a document.">Document</a> * document = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>;
<a name="l00387"></a>00387     <span class="keywordtype">int</span> first = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00388"></a>00388     <span class="keywordtype">int</span> offset = <a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">DocumentEditor_getEntryOffset</a>(documentEditor, button);
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <a class="code" href="structDocumentRow.html" title="Structure representing a row in a document (as a cell in a simple linked list.">DocumentRow</a> * row = <a class="code" href="group__DocumentRowList.html#gac15557719c72aeb2e8d5c3d7a0574f97" title="Get a pointer on the rowIndex-th row of the list.">DocumentRowList_get</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, first + offset);
<a name="l00391"></a>00391     <span class="keywordflow">if</span> (row != NULL) {
<a name="l00392"></a>00392         <a class="code" href="group__DocumentRowList.html#gaf49d517e8ccde05a90acd567f03d61d9" title="Insert a row after a given row.">DocumentRowList_insertAfter</a>(&amp;document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, row, <a class="code" href="group__DocumentRowList.html#gaaac900c5bc48cdc51ada7f2573287d7e" title="Create a new row on the heap and initialize it.">DocumentRow_create</a>());
<a name="l00393"></a>00393         <span class="keywordflow">if</span> (offset == <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a> - 1) {
<a name="l00394"></a>00394             first++;
<a name="l00395"></a>00395             <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00396"></a>00396             gtk_range_set_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), first);
<a name="l00397"></a>00397             gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[offset]);
<a name="l00398"></a>00398         } <span class="keywordflow">else</span> {
<a name="l00399"></a>00399             offset++;
<a name="l00400"></a>00400             <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00401"></a>00401             gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[offset]);
<a name="l00402"></a>00402         }
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 }
<a name="l00405"></a>00405 
<a name="l00406"></a><a class="code" href="DocumentEditor_8c.html#a763551e94005c5edce8807c9a6001ccf">00406</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#a763551e94005c5edce8807c9a6001ccf">DocumentEditor_removeCurrent</a>(GtkWidget * button, <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00407"></a>00407     <a class="code" href="structDocument.html" title="Structure representing a document.">Document</a> * document = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>;
<a name="l00408"></a>00408     <span class="keywordtype">int</span> first = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00409"></a>00409     <span class="keywordtype">int</span> offset = <a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">DocumentEditor_getEntryOffset</a>(documentEditor, button);
<a name="l00410"></a>00410 
<a name="l00411"></a>00411     <a class="code" href="structDocumentRow.html" title="Structure representing a row in a document (as a cell in a simple linked list.">DocumentRow</a> * row = <a class="code" href="group__DocumentRowList.html#gac15557719c72aeb2e8d5c3d7a0574f97" title="Get a pointer on the rowIndex-th row of the list.">DocumentRowList_get</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, first + offset);
<a name="l00412"></a>00412     <span class="keywordflow">if</span> (row != NULL) {
<a name="l00413"></a>00413         <span class="keywordtype">int</span> count = <a class="code" href="group__DocumentRowList.html#gaaef8bf84762b5502e9d3c27dd84f4bfd" title="Get the number of rows in the list.">DocumentRowList_getRowCount</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>);
<a name="l00414"></a>00414         <span class="keywordflow">if</span> (count &gt; 1) {
<a name="l00415"></a>00415             <a class="code" href="group__DocumentRowList.html#ga65426a102209330b2a100f754744bf87" title="Remove a row from the list.">DocumentRowList_removeRow</a>(&amp;document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, row);
<a name="l00416"></a>00416             <span class="keywordflow">if</span> (first &gt; 0 &amp;&amp; first &lt; count - <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>) {
<a name="l00417"></a>00417                 first = <a class="code" href="group__DocumentRowList.html#gaaef8bf84762b5502e9d3c27dd84f4bfd" title="Get the number of rows in the list.">DocumentRowList_getRowCount</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>) - <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>;
<a name="l00418"></a>00418             }
<a name="l00419"></a>00419             <span class="keywordflow">if</span> (first + offset &gt;= count)
<a name="l00420"></a>00420                 offset = count - first - 1;
<a name="l00421"></a>00421             <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00422"></a>00422             gtk_range_set_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), first);
<a name="l00423"></a>00423             gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[offset]);
<a name="l00424"></a>00424         } <span class="keywordflow">else</span> {
<a name="l00425"></a>00425             free(row-&gt;<a class="code" href="structDocumentRow.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code.">code</a>);
<a name="l00426"></a>00426             row-&gt;<a class="code" href="structDocumentRow.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code.">code</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00427"></a>00427             free(row-&gt;<a class="code" href="structDocumentRow.html#a238af89adb357ae219950bae456a4d07" title="The designation.">designation</a>);
<a name="l00428"></a>00428             row-&gt;<a class="code" href="structDocumentRow.html#a238af89adb357ae219950bae456a4d07" title="The designation.">designation</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00429"></a>00429             free(row-&gt;<a class="code" href="structDocumentRow.html#a9e8ebe5266edb99433e33a7e8b8956ce" title="The unity.">unity</a>);
<a name="l00430"></a>00430             row-&gt;<a class="code" href="structDocumentRow.html#a9e8ebe5266edb99433e33a7e8b8956ce" title="The unity.">unity</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00431"></a>00431             row-&gt;<a class="code" href="structDocumentRow.html#aa202ff7ac9da4792e13c732cecd057cd" title="The base price.">basePrice</a> = 0;
<a name="l00432"></a>00432             row-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a> = 0;
<a name="l00433"></a>00433             row-&gt;<a class="code" href="structDocumentRow.html#a9b94cceae6d68929f7e6065540058f1d" title="The rate of VAT.">rateOfVAT</a> = 0;
<a name="l00434"></a>00434             <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00435"></a>00435             gtk_range_set_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), first);
<a name="l00436"></a>00436             gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[offset]);
<a name="l00437"></a>00437         }
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439 }
<a name="l00440"></a>00440 
<a name="l00441"></a><a class="code" href="DocumentEditor_8c.html#ae819a177f124b4ba60fd5ff080b72cd4">00441</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="DocumentEditor_8c.html#ae819a177f124b4ba60fd5ff080b72cd4">DocumentEditor_chooseProduct</a>(GtkWidget * button, <a class="code" href="structDocumentEditor.html">DocumentEditor</a> * documentEditor) {
<a name="l00442"></a>00442     <a class="code" href="structCatalogDB.html" title="The structure which represents an opened catalog database.">CatalogDB</a> * catalogDB;
<a name="l00443"></a>00443     <a class="code" href="structDocument.html" title="Structure representing a document.">Document</a> * document = documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a>;
<a name="l00444"></a>00444     <span class="keywordtype">int</span> first = (int) gtk_range_get_value(GTK_RANGE(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>));
<a name="l00445"></a>00445     <span class="keywordtype">int</span> offset = <a class="code" href="DocumentEditor_8c.html#acc3c6ec42abbdde67fe78430c8608ef8">DocumentEditor_getEntryOffset</a>(documentEditor, button);
<a name="l00446"></a>00446     <a class="code" href="structDocumentRow.html" title="Structure representing a row in a document (as a cell in a simple linked list.">DocumentRow</a> * row = <a class="code" href="group__DocumentRowList.html#gac15557719c72aeb2e8d5c3d7a0574f97" title="Get a pointer on the rowIndex-th row of the list.">DocumentRowList_get</a>(document-&gt;<a class="code" href="structDocument.html#afb959b3b54681ede558d5e86b9990661" title="The rows.">rows</a>, first + offset);
<a name="l00447"></a>00447     <span class="keywordtype">int</span> recordNum = <a class="code" href="group__Catalog.html#ga25b664096a6743c0cdd8268de24d0545" title="Select a product in the catalog of products.">Catalog_select</a>(NULL);
<a name="l00448"></a>00448 
<a name="l00449"></a>00449     <span class="keywordflow">if</span> (recordNum != -1 &amp;&amp; row != NULL) {
<a name="l00450"></a>00450         <a class="code" href="structCatalogRecord.html" title="A catalog record.">CatalogRecord</a> record;
<a name="l00451"></a>00451         <a class="code" href="group__CatalogRecord.html#ga9691e16a453bb09d3bd4d0533be22371" title="Initialize a record.">CatalogRecord_init</a>(&amp;record);
<a name="l00452"></a>00452         catalogDB = <a class="code" href="group__CatalogDB.html#ga4357d02bee0824bd809e698163d88ffe" title="Open if exists or create otherwise a database of products.">CatalogDB_openOrCreate</a>(<a class="code" href="group__CatalogDB.html#ga663c03a2f2748da8c7a572f17cf06ef1" title="The catalog file name.">CATALOGDB_FILENAME</a>);
<a name="l00453"></a>00453         <a class="code" href="group__CatalogDB.html#gaef9df9236eac0f50bea19d2a437c815c" title="Read a record from the database.">CatalogDB_readRecord</a>(catalogDB, recordNum, &amp;record);
<a name="l00454"></a>00454         free(row-&gt;<a class="code" href="structDocumentRow.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code.">code</a>);
<a name="l00455"></a>00455         row-&gt;<a class="code" href="structDocumentRow.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code.">code</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(record.<a class="code" href="structCatalogRecord.html#a5b9e1322ebc26e12c192f03bccba2770" title="The code of the product.">code</a>);
<a name="l00456"></a>00456         free(row-&gt;<a class="code" href="structDocumentRow.html#a238af89adb357ae219950bae456a4d07" title="The designation.">designation</a>);
<a name="l00457"></a>00457         row-&gt;<a class="code" href="structDocumentRow.html#a238af89adb357ae219950bae456a4d07" title="The designation.">designation</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(record.<a class="code" href="structCatalogRecord.html#a238af89adb357ae219950bae456a4d07" title="The designation of the product.">designation</a>);
<a name="l00458"></a>00458         free(row-&gt;<a class="code" href="structDocumentRow.html#a9e8ebe5266edb99433e33a7e8b8956ce" title="The unity.">unity</a>);
<a name="l00459"></a>00459         row-&gt;<a class="code" href="structDocumentRow.html#a9e8ebe5266edb99433e33a7e8b8956ce" title="The unity.">unity</a> = <a class="code" href="group__String.html#gad2854302f1c0bf1ba2ac7641b8d4bf24" title="Like the strdup() function.">duplicateString</a>(record.<a class="code" href="structCatalogRecord.html#a9e8ebe5266edb99433e33a7e8b8956ce" title="The unity of the product.">unity</a>);
<a name="l00460"></a>00460         row-&gt;<a class="code" href="structDocumentRow.html#aa202ff7ac9da4792e13c732cecd057cd" title="The base price.">basePrice</a> = record.<a class="code" href="structCatalogRecord.html#aa202ff7ac9da4792e13c732cecd057cd" title="The base price of the product (the product should not be sold at a lower price)">basePrice</a>;
<a name="l00461"></a>00461         row-&gt;<a class="code" href="structDocumentRow.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price.">sellingPrice</a> = record.<a class="code" href="structCatalogRecord.html#a3ba5a6e4bf38bba226358967cfa33302" title="The selling price of the product.">sellingPrice</a>;
<a name="l00462"></a>00462         row-&gt;<a class="code" href="structDocumentRow.html#a9b94cceae6d68929f7e6065540058f1d" title="The rate of VAT.">rateOfVAT</a> = record.<a class="code" href="structCatalogRecord.html#a9b94cceae6d68929f7e6065540058f1d" title="The rate of the VAT of the product.">rateOfVAT</a>;
<a name="l00463"></a>00463         <a class="code" href="group__CatalogDB.html#ga38e2b6b2af8873e53d615cd74ca08575" title="Flush cached data, close a database and free the structure representing the opened database...">CatalogDB_close</a>(catalogDB);
<a name="l00464"></a>00464         <a class="code" href="group__CatalogRecord.html#ga8823e779dd4b448e11870843c2f26f4d" title="Finalize a record.">CatalogRecord_finalize</a>(&amp;record);
<a name="l00465"></a>00465         <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(documentEditor, first);
<a name="l00466"></a>00466         gtk_widget_grab_focus(documentEditor-&gt;<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[offset]);
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468 }
<a name="l00469"></a>00469 
<a name="l00470"></a><a class="code" href="group__DocumentEditor.html#ga81e9796adf3183dbc2126507265e510a">00470</a> <span class="keywordtype">int</span> <a class="code" href="group__DocumentEditor.html#ga81e9796adf3183dbc2126507265e510a" title="Edit a document.">DocumentEditor_edit</a>(GtkWindow * parent, <a class="code" href="group__DocumentEditor.html#gac02d640352b5046fac70aa514ef3ffa5" title="Type of operation to do on the document.">TypeAction</a> typeAction, <a class="code" href="structDocument.html" title="Structure representing a document.">Document</a> * document) {
<a name="l00471"></a>00471     <a class="code" href="structDocumentEditor.html">DocumentEditor</a> documentEditor;
<a name="l00472"></a>00472     GtkWidget * dialog;
<a name="l00473"></a>00473     gint response;
<a name="l00474"></a>00474     GtkWidget * button, *hbox, *vbox, *table, *label, *sw, *alignment, *frame;
<a name="l00475"></a>00475     guint i;
<a name="l00476"></a>00476     GdkColor color;
<a name="l00477"></a>00477     <span class="keyword">const</span> <span class="keywordtype">char</span> * title;
<a name="l00478"></a>00478     GtkObject * adjustment;
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     documentEditor.<a class="code" href="structDocumentEditor.html#aa25c3b1ddc44ed56c59d5c70879ec5f4">document</a> = document;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482     <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5a3780f381b44ad22db195fa9c673fab3a" title="It&#39;s a creation.">NEW_DOCUMENT</a>) {
<a name="l00483"></a>00483         <span class="keywordflow">if</span> (document-&gt;<a class="code" href="structDocument.html#ad2e6abc5a91c6708161b80bba3facc28" title="The type of document.">typeDocument</a> == <a class="code" href="group__Document.html#gga69c49c41d38ae1dcaa0f31a22b1efee6a356b4a530320c31af5a30367b5d390ea" title="It&#39;s a quotation.">QUOTATION</a>)
<a name="l00484"></a>00484             title = <span class="stringliteral">&quot;Nouveau devis&quot;</span>;
<a name="l00485"></a>00485         <span class="keywordflow">else</span>
<a name="l00486"></a>00486             title = <span class="stringliteral">&quot;Nouvelle facture&quot;</span>;
<a name="l00487"></a>00487     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>) {
<a name="l00488"></a>00488         <span class="keywordflow">if</span> (document-&gt;<a class="code" href="structDocument.html#ad2e6abc5a91c6708161b80bba3facc28" title="The type of document.">typeDocument</a> == <a class="code" href="group__Document.html#gga69c49c41d38ae1dcaa0f31a22b1efee6a356b4a530320c31af5a30367b5d390ea" title="It&#39;s a quotation.">QUOTATION</a>)
<a name="l00489"></a>00489             title = <span class="stringliteral">&quot;Visualisation d&#39;un devis&quot;</span>;
<a name="l00490"></a>00490         <span class="keywordflow">else</span>
<a name="l00491"></a>00491             title = <span class="stringliteral">&quot;Visualisationd d&#39;une facture&quot;</span>;
<a name="l00492"></a>00492     } <span class="keywordflow">else</span> {
<a name="l00493"></a>00493         <span class="keywordflow">if</span> (document-&gt;<a class="code" href="structDocument.html#ad2e6abc5a91c6708161b80bba3facc28" title="The type of document.">typeDocument</a> == <a class="code" href="group__Document.html#gga69c49c41d38ae1dcaa0f31a22b1efee6a356b4a530320c31af5a30367b5d390ea" title="It&#39;s a quotation.">QUOTATION</a>)
<a name="l00494"></a>00494             title = <span class="stringliteral">&quot;Edition d&#39;un devis&quot;</span>;
<a name="l00495"></a>00495         <span class="keywordflow">else</span>
<a name="l00496"></a>00496             title = <span class="stringliteral">&quot;Edition d&#39;une facture&quot;</span>;
<a name="l00497"></a>00497     }
<a name="l00498"></a>00498 
<a name="l00499"></a>00499     <span class="keywordflow">if</span> (typeAction != <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>) {
<a name="l00500"></a>00500         dialog = gtk_dialog_new_with_buttons(title, parent, GTK_DIALOG_MODAL
<a name="l00501"></a>00501                 | GTK_DIALOG_DESTROY_WITH_PARENT, GTK_STOCK_PRINT, 1, GTK_STOCK_SAVE,
<a name="l00502"></a>00502                 GTK_RESPONSE_OK, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, NULL);
<a name="l00503"></a>00503     } <span class="keywordflow">else</span> {
<a name="l00504"></a>00504         dialog = gtk_dialog_new_with_buttons(title, parent, GTK_DIALOG_MODAL
<a name="l00505"></a>00505                 | GTK_DIALOG_DESTROY_WITH_PARENT, GTK_STOCK_PRINT, 1, GTK_STOCK_CLOSE,
<a name="l00506"></a>00506                 GTK_RESPONSE_CANCEL, NULL);
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508 
<a name="l00509"></a>00509     gtk_container_set_border_width(GTK_CONTAINER(dialog), 5);
<a name="l00510"></a>00510 
<a name="l00511"></a>00511     gtk_container_set_border_width(GTK_CONTAINER(GTK_DIALOG (dialog)-&gt;vbox), 5);
<a name="l00512"></a>00512 
<a name="l00513"></a>00513     <span class="comment">/* customer + choix customer + data + n° */</span>
<a name="l00514"></a>00514     hbox = gtk_hbox_new(FALSE, 5);
<a name="l00515"></a>00515     gtk_box_pack_start(GTK_BOX (GTK_DIALOG (dialog)-&gt;vbox), hbox, TRUE, TRUE, 10);
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     vbox = gtk_vbox_new(FALSE, 5);
<a name="l00518"></a>00518     gtk_box_pack_start(GTK_BOX (hbox), vbox, TRUE, TRUE, 0);
<a name="l00519"></a>00519 
<a name="l00520"></a>00520     <span class="keywordflow">if</span> (typeAction != <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>) {
<a name="l00521"></a>00521         button = gtk_button_new_with_label(<span class="stringliteral">&quot;Choisir un customer&quot;</span>);
<a name="l00522"></a>00522         g_signal_connect(button, <span class="stringliteral">&quot;clicked&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a382c9588a91d07fd7654c90f80efdd22">DocumentEditor_chooseCustomer</a>),&amp;documentEditor);
<a name="l00523"></a>00523         gtk_box_pack_start(GTK_BOX (vbox), button, TRUE, TRUE, 0);
<a name="l00524"></a>00524     }
<a name="l00525"></a>00525 
<a name="l00526"></a>00526     documentEditor.<a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a> = gtk_text_view_new();
<a name="l00527"></a>00527     gtk_text_view_set_wrap_mode(GTK_TEXT_VIEW (documentEditor.<a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a>), GTK_WRAP_WORD);
<a name="l00528"></a>00528     gtk_text_view_set_editable(GTK_TEXT_VIEW (documentEditor.<a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a>), FALSE);
<a name="l00529"></a>00529     gtk_widget_set_size_request(documentEditor.<a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a>, 300, -1);
<a name="l00530"></a>00530     gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a>, FALSE);
<a name="l00531"></a>00531 
<a name="l00532"></a>00532     sw = gtk_scrolled_window_new(NULL, NULL);
<a name="l00533"></a>00533     gtk_scrolled_window_set_policy(GTK_SCROLLED_WINDOW (sw), GTK_POLICY_AUTOMATIC,
<a name="l00534"></a>00534             GTK_POLICY_AUTOMATIC);
<a name="l00535"></a>00535     gtk_container_add(GTK_CONTAINER (sw), documentEditor.<a class="code" href="structDocumentEditor.html#a541cc43453f8eb3127bfc4a8cd07efe6">customerViewer</a>);
<a name="l00536"></a>00536     gtk_box_pack_start(GTK_BOX (vbox), sw, TRUE, TRUE, 0);
<a name="l00537"></a>00537 
<a name="l00538"></a>00538     table = gtk_table_new(4, 2, FALSE);
<a name="l00539"></a>00539     gtk_table_set_row_spacings(GTK_TABLE (table), 4);
<a name="l00540"></a>00540     gtk_table_set_col_spacings(GTK_TABLE (table), 4);
<a name="l00541"></a>00541 
<a name="l00542"></a>00542     alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00543"></a>00543     gtk_container_add(GTK_CONTAINER(alignment), table);
<a name="l00544"></a>00544     gtk_box_pack_start(GTK_BOX (hbox), alignment, FALSE, FALSE, 0);
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     label = gtk_label_new(<span class="stringliteral">&quot;Opérateur :&quot;</span>);
<a name="l00547"></a>00547     alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00548"></a>00548     gtk_container_add(GTK_CONTAINER(alignment), label);
<a name="l00549"></a>00549     gtk_table_attach_defaults(GTK_TABLE (table), alignment, 0, 1, 0, 1);
<a name="l00550"></a>00550     documentEditor.<a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a> = gtk_entry_new();
<a name="l00551"></a>00551     gtk_entry_set_editable(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a>), FALSE);
<a name="l00552"></a>00552     gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a>, FALSE);
<a name="l00553"></a>00553     gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a>), 10);
<a name="l00554"></a>00554     gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a>, 1, 2, 0, 1);
<a name="l00555"></a>00555     gtk_label_set_mnemonic_widget(GTK_LABEL (label), documentEditor.<a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a>);
<a name="l00556"></a>00556     gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#afc95ee64c821bf18428cbd1a150892e6">operatorEntry</a>), 0.5);
<a name="l00557"></a>00557 
<a name="l00558"></a>00558     label = gtk_label_new(<span class="stringliteral">&quot;Date d&#39;édition :&quot;</span>);
<a name="l00559"></a>00559     alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00560"></a>00560     gtk_container_add(GTK_CONTAINER(alignment), label);
<a name="l00561"></a>00561     gtk_table_attach_defaults(GTK_TABLE (table), alignment, 0, 1, 1, 2);
<a name="l00562"></a>00562     documentEditor.<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a> = gtk_entry_new();
<a name="l00563"></a>00563     gtk_entry_set_editable(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>), FALSE);
<a name="l00564"></a>00564     gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>, FALSE);
<a name="l00565"></a>00565     gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>), 10);
<a name="l00566"></a>00566     gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>, 1, 2, 1, 2);
<a name="l00567"></a>00567     gtk_label_set_mnemonic_widget(GTK_LABEL (label), documentEditor.<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>);
<a name="l00568"></a>00568     gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>), 10);
<a name="l00569"></a>00569     gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a31d1204d007692e50b2589ad5ed2e869">editDateEntry</a>), 0.5);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     label = gtk_label_new(<span class="stringliteral">&quot;Date de fin de validité (pour un devis) :&quot;</span>);
<a name="l00572"></a>00572     alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00573"></a>00573     gtk_container_add(GTK_CONTAINER(alignment), label);
<a name="l00574"></a>00574     gtk_table_attach_defaults(GTK_TABLE (table), alignment, 0, 1, 2, 3);
<a name="l00575"></a>00575     documentEditor.<a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a> = gtk_entry_new();
<a name="l00576"></a>00576     gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a>, 1, 2, 2, 3);
<a name="l00577"></a>00577     gtk_label_set_mnemonic_widget(GTK_LABEL (label), documentEditor.<a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a>);
<a name="l00578"></a>00578     gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a>), 20);
<a name="l00579"></a>00579     gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a>), 0.5);
<a name="l00580"></a>00580     <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00581"></a>00581         gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#af43ba5f281b3192089601bd1e0a772e8">expiryDateEntry</a>, FALSE);
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     label = gtk_label_new(<span class="stringliteral">&quot;Numéro de document :&quot;</span>);
<a name="l00584"></a>00584     alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00585"></a>00585     gtk_container_add(GTK_CONTAINER(alignment), label);
<a name="l00586"></a>00586     gtk_table_attach_defaults(GTK_TABLE (table), alignment, 0, 1, 3, 4);
<a name="l00587"></a>00587     documentEditor.<a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a> = gtk_entry_new();
<a name="l00588"></a>00588     gtk_entry_set_editable(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a>), FALSE);
<a name="l00589"></a>00589     gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a>, FALSE);
<a name="l00590"></a>00590     gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a>), 10);
<a name="l00591"></a>00591     gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a>, 1, 2, 3, 4);
<a name="l00592"></a>00592     gtk_label_set_mnemonic_widget(GTK_LABEL (label), documentEditor.<a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a>);
<a name="l00593"></a>00593     gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a1d5ed82d8faa0865565e8881ccdd432e">docNumberEntry</a>), 0.5);
<a name="l00594"></a>00594 
<a name="l00595"></a>00595     <span class="comment">/* objet</span>
<a name="l00596"></a>00596 <span class="comment">     customer + choix customer + data + n° */</span>
<a name="l00597"></a>00597     hbox = gtk_hbox_new(FALSE, 5);
<a name="l00598"></a>00598     gtk_box_pack_start(GTK_BOX (GTK_DIALOG (dialog)-&gt;vbox), hbox, TRUE, TRUE, 5);
<a name="l00599"></a>00599 
<a name="l00600"></a>00600     label = gtk_label_new(<span class="stringliteral">&quot;Objet :&quot;</span>);
<a name="l00601"></a>00601     gtk_box_pack_start(GTK_BOX (hbox), label, FALSE, FALSE, 0);
<a name="l00602"></a>00602     documentEditor.<a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">objectEntry</a> = gtk_entry_new();
<a name="l00603"></a>00603     gtk_box_pack_start(GTK_BOX (hbox), documentEditor.<a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">objectEntry</a>, TRUE, TRUE, 0);
<a name="l00604"></a>00604     gtk_label_set_mnemonic_widget(GTK_LABEL (label), documentEditor.<a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">objectEntry</a>);
<a name="l00605"></a>00605     gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">objectEntry</a>), 200);
<a name="l00606"></a>00606     <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00607"></a>00607         gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a5e5279356c4510fb9bdbb9f2900036fc">objectEntry</a>, FALSE);
<a name="l00608"></a>00608 
<a name="l00609"></a>00609     <span class="comment">/* lignes de saisies + scrollbar */</span>
<a name="l00610"></a>00610     table = gtk_table_new(2 * (<a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a> + 1), 11, FALSE);
<a name="l00611"></a>00611     gtk_table_set_row_spacings(GTK_TABLE (table), 4);
<a name="l00612"></a>00612     gtk_table_set_col_spacings(GTK_TABLE (table), 4);
<a name="l00613"></a>00613 
<a name="l00614"></a>00614     alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00615"></a>00615     gtk_container_add(GTK_CONTAINER(alignment), table);
<a name="l00616"></a>00616     gtk_box_pack_start(GTK_BOX (GTK_DIALOG (dialog)-&gt;vbox), alignment, FALSE, FALSE, 5);
<a name="l00617"></a>00617 
<a name="l00618"></a>00618     gdk_color_parse(<span class="stringliteral">&quot;yellow&quot;</span>, &amp;color);
<a name="l00619"></a>00619 
<a name="l00620"></a>00620     label = gtk_label_new(<span class="stringliteral">&quot;Code&quot;</span>);
<a name="l00621"></a>00621     frame = gtk_event_box_new();
<a name="l00622"></a>00622     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00623"></a>00623     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00624"></a>00624     gtk_table_attach_defaults(GTK_TABLE (table), frame, 0, 1, 0, 1);
<a name="l00625"></a>00625     label = gtk_label_new(<span class="stringliteral">&quot;Désignation&quot;</span>);
<a name="l00626"></a>00626     frame = gtk_event_box_new();
<a name="l00627"></a>00627     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00628"></a>00628     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00629"></a>00629     gtk_table_attach_defaults(GTK_TABLE (table), frame, 1, 8, 0, 1);
<a name="l00630"></a>00630     label = gtk_label_new(<span class="stringliteral">&quot;Quantité&quot;</span>);
<a name="l00631"></a>00631     frame = gtk_event_box_new();
<a name="l00632"></a>00632     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00633"></a>00633     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00634"></a>00634     gtk_table_attach_defaults(GTK_TABLE (table), frame, 1, 2, 1, 2);
<a name="l00635"></a>00635     label = gtk_label_new(<span class="stringliteral">&quot;Unité&quot;</span>);
<a name="l00636"></a>00636     frame = gtk_event_box_new();
<a name="l00637"></a>00637     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00638"></a>00638     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00639"></a>00639     gtk_table_attach_defaults(GTK_TABLE (table), frame, 2, 3, 1, 2);
<a name="l00640"></a>00640     label = gtk_label_new(<span class="stringliteral">&quot;Prix de revient&quot;</span>);
<a name="l00641"></a>00641     frame = gtk_event_box_new();
<a name="l00642"></a>00642     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00643"></a>00643     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00644"></a>00644     gtk_table_attach_defaults(GTK_TABLE (table), frame, 3, 4, 1, 2);
<a name="l00645"></a>00645     label = gtk_label_new(<span class="stringliteral">&quot;Prix de vente&quot;</span>);
<a name="l00646"></a>00646     frame = gtk_event_box_new();
<a name="l00647"></a>00647     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00648"></a>00648     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00649"></a>00649     gtk_table_attach_defaults(GTK_TABLE (table), frame, 4, 5, 1, 2);
<a name="l00650"></a>00650     label = gtk_label_new(<span class="stringliteral">&quot;Réduction&quot;</span>);
<a name="l00651"></a>00651     frame = gtk_event_box_new();
<a name="l00652"></a>00652     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00653"></a>00653     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00654"></a>00654     gtk_table_attach_defaults(GTK_TABLE (table), frame, 5, 6, 1, 2);
<a name="l00655"></a>00655     label = gtk_label_new(<span class="stringliteral">&quot;Prix public&quot;</span>);
<a name="l00656"></a>00656     frame = gtk_event_box_new();
<a name="l00657"></a>00657     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00658"></a>00658     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00659"></a>00659     gtk_table_attach_defaults(GTK_TABLE (table), frame, 6, 7, 1, 2);
<a name="l00660"></a>00660     label = gtk_label_new(<span class="stringliteral">&quot;Taux TVA (en %)&quot;</span>);
<a name="l00661"></a>00661     frame = gtk_event_box_new();
<a name="l00662"></a>00662     gtk_widget_modify_bg(frame, GTK_STATE_NORMAL, &amp;color);
<a name="l00663"></a>00663     gtk_container_add(GTK_CONTAINER(frame), label);
<a name="l00664"></a>00664     gtk_table_attach_defaults(GTK_TABLE (table), frame, 7, 8, 1, 2);
<a name="l00665"></a>00665 
<a name="l00666"></a>00666     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="DocumentEditor_8c.html#a26a4830854f0bb01384641874efabeaa">EDITOR_ROWCOUNT</a>; ++i) {
<a name="l00667"></a>00667         {
<a name="l00668"></a>00668             <a class="code" href="structCatalogRecord__FieldProperties.html" title="A structure holding the properties of a field of a CatalogRecord.">CatalogRecord_FieldProperties</a> properties = <a class="code" href="group__CatalogRecord.html#ga64e48fd820803b196a1b1e2aa1aeb16b" title="Get a copy of the properties of a field.">CatalogRecord_getFieldProperties</a>(
<a name="l00669"></a>00669                     <a class="code" href="group__CatalogRecord.html#gga3833ced63c1c0a11655447e5136c2ca7a4d204dd316dccc3a199567e3dc36f2eb" title="The code id.">CATALOGRECORD_CODE_FIELD</a>);
<a name="l00670"></a>00670             documentEditor.<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i] = gtk_entry_new();
<a name="l00671"></a>00671             gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i]), properties.<a class="code" href="structCatalogRecord__FieldProperties.html#a601639a266b6cd1b91eddacff854c9ac" title="The maximal length in characters to allow for the field (GTK+ related)">maxlength</a>);
<a name="l00672"></a>00672             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i], 0, 1, 0 + 2
<a name="l00673"></a>00673                     * (i + 1), 1 + 2 * (i + 1));
<a name="l00674"></a>00674             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00675"></a>00675             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i]), <span class="stringliteral">&quot;key-press-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a23e0f6ca38e1fd737552dc1d19c6547b">DocumentEditor_handleFirstEntry</a>), &amp;documentEditor);
<a name="l00676"></a>00676             gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i]), 10);
<a name="l00677"></a>00677             <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00678"></a>00678                 gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#aa78845342618691b93abc3119dff00fc">codeEntry</a>[i], FALSE);
<a name="l00679"></a>00679         }
<a name="l00680"></a>00680 
<a name="l00681"></a>00681         {
<a name="l00682"></a>00682             <span class="keywordflow">if</span> (typeAction != <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>) {
<a name="l00683"></a>00683                 documentEditor.<a class="code" href="structDocumentEditor.html#a33841f62db8f532bb0ef62e74dc902ef">catalogButton</a>[i] = gtk_button_new_with_label(<span class="stringliteral">&quot;Rechercher&quot;</span>);
<a name="l00684"></a>00684                 gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a33841f62db8f532bb0ef62e74dc902ef">catalogButton</a>[i], 0, 1,
<a name="l00685"></a>00685                         1 + 2 * (i + 1), 2 + 2 * (i + 1));
<a name="l00686"></a>00686                 g_signal_connect(documentEditor.<a class="code" href="structDocumentEditor.html#a33841f62db8f532bb0ef62e74dc902ef">catalogButton</a>[i], <span class="stringliteral">&quot;clicked&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#ae819a177f124b4ba60fd5ff080b72cd4">DocumentEditor_chooseProduct</a>),&amp;documentEditor);
<a name="l00687"></a>00687             } <span class="keywordflow">else</span>
<a name="l00688"></a>00688                 documentEditor.<a class="code" href="structDocumentEditor.html#a33841f62db8f532bb0ef62e74dc902ef">catalogButton</a>[i] = NULL;
<a name="l00689"></a>00689         }
<a name="l00690"></a>00690 
<a name="l00691"></a>00691         {
<a name="l00692"></a>00692             <a class="code" href="structCatalogRecord__FieldProperties.html" title="A structure holding the properties of a field of a CatalogRecord.">CatalogRecord_FieldProperties</a> properties = <a class="code" href="group__CatalogRecord.html#ga64e48fd820803b196a1b1e2aa1aeb16b" title="Get a copy of the properties of a field.">CatalogRecord_getFieldProperties</a>(
<a name="l00693"></a>00693                     <a class="code" href="group__CatalogRecord.html#gga3833ced63c1c0a11655447e5136c2ca7a02bda3b6ab5088442000ebdb7253a9c0" title="The designation id.">CATALOGRECORD_DESIGNATION_FIELD</a>);
<a name="l00694"></a>00694             documentEditor.<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i] = gtk_entry_new();
<a name="l00695"></a>00695             gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i]),
<a name="l00696"></a>00696                     properties.<a class="code" href="structCatalogRecord__FieldProperties.html#a601639a266b6cd1b91eddacff854c9ac" title="The maximal length in characters to allow for the field (GTK+ related)">maxlength</a>);
<a name="l00697"></a>00697             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i], 1, 8,
<a name="l00698"></a>00698                     0 + 2 * (i + 1), 1 + 2 * (i + 1));
<a name="l00699"></a>00699             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00700"></a>00700             <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00701"></a>00701                 gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#ad39e68ae99124a4f810c22e4f703473e">designationEntry</a>[i], FALSE);
<a name="l00702"></a>00702         }
<a name="l00703"></a>00703 
<a name="l00704"></a>00704         {
<a name="l00705"></a>00705             documentEditor.<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i] = gtk_entry_new();
<a name="l00706"></a>00706             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i], 1, 2, 1
<a name="l00707"></a>00707                     + 2 * (i + 1), 2 + 2 * (i + 1));
<a name="l00708"></a>00708             gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i]), 1);
<a name="l00709"></a>00709             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00710"></a>00710             gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i]), 10);
<a name="l00711"></a>00711             documentEditor.<a class="code" href="structDocumentEditor.html#a0e90aa36d438a50077714a4dd83c97e8">quantity_insert_text_handler</a>[i]
<a name="l00712"></a>00712                     = g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i]), <span class="stringliteral">&quot;insert_text&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a68b46b5e676a2723192f4d4a5eb53446">DocumentEditor_insert_text_handler_positiveNumeric</a>), &amp;documentEditor);
<a name="l00713"></a>00713             <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00714"></a>00714                 gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#ab6cfd2c4433c7b4910574b3677d1d1c1">quantityEntry</a>[i], FALSE);
<a name="l00715"></a>00715         }
<a name="l00716"></a>00716 
<a name="l00717"></a>00717         {
<a name="l00718"></a>00718             <a class="code" href="structCatalogRecord__FieldProperties.html" title="A structure holding the properties of a field of a CatalogRecord.">CatalogRecord_FieldProperties</a> properties = <a class="code" href="group__CatalogRecord.html#ga64e48fd820803b196a1b1e2aa1aeb16b" title="Get a copy of the properties of a field.">CatalogRecord_getFieldProperties</a>(
<a name="l00719"></a>00719                     <a class="code" href="group__CatalogRecord.html#gga3833ced63c1c0a11655447e5136c2ca7adf423818130c55d573b79b4438ac27a1" title="The unity id.">CATALOGRECORD_UNITY_FIELD</a>);
<a name="l00720"></a>00720             documentEditor.<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i] = gtk_entry_new();
<a name="l00721"></a>00721             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i], 2, 3, 1 + 2
<a name="l00722"></a>00722                     * (i + 1), 2 + 2 * (i + 1));
<a name="l00723"></a>00723             gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i]), properties.<a class="code" href="structCatalogRecord__FieldProperties.html#a601639a266b6cd1b91eddacff854c9ac" title="The maximal length in characters to allow for the field (GTK+ related)">maxlength</a>);
<a name="l00724"></a>00724             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00725"></a>00725             gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i]), 10);
<a name="l00726"></a>00726             <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00727"></a>00727                 gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#ab3a5077023f9cbec62ce45349ed1197c">unityEntry</a>[i], FALSE);
<a name="l00728"></a>00728         }
<a name="l00729"></a>00729 
<a name="l00730"></a>00730         {
<a name="l00731"></a>00731             documentEditor.<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i] = gtk_entry_new();
<a name="l00732"></a>00732             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i], 3, 4, 1
<a name="l00733"></a>00733                     + 2 * (i + 1), 2 + 2 * (i + 1));
<a name="l00734"></a>00734             gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i]), 1);
<a name="l00735"></a>00735             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00736"></a>00736             gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i]), 10);
<a name="l00737"></a>00737             documentEditor.<a class="code" href="structDocumentEditor.html#a00867179ae080fe0b74e5a51ec09851e">basePrice_insert_text_handler</a>[i]
<a name="l00738"></a>00738                     = g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i]), <span class="stringliteral">&quot;insert_text&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a68b46b5e676a2723192f4d4a5eb53446">DocumentEditor_insert_text_handler_positiveNumeric</a>), &amp;documentEditor);
<a name="l00739"></a>00739             <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00740"></a>00740                 gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#ab15c7c6cf8f5b7cd949870ad5f06fdb2">basePriceEntry</a>[i], FALSE);
<a name="l00741"></a>00741         }
<a name="l00742"></a>00742 
<a name="l00743"></a>00743         {
<a name="l00744"></a>00744             documentEditor.<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i] = gtk_entry_new();
<a name="l00745"></a>00745             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i], 4, 5,
<a name="l00746"></a>00746                     1 + 2 * (i + 1), 2 + 2 * (i + 1));
<a name="l00747"></a>00747             gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i]), 1);
<a name="l00748"></a>00748             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00749"></a>00749             gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i]), 10);
<a name="l00750"></a>00750             documentEditor.<a class="code" href="structDocumentEditor.html#a2436a93f3b2187f133029e31ceccfc88">sellingPrice_insert_text_handler</a>[i]
<a name="l00751"></a>00751                     = g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i]), <span class="stringliteral">&quot;insert_text&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a68b46b5e676a2723192f4d4a5eb53446">DocumentEditor_insert_text_handler_positiveNumeric</a>), &amp;documentEditor);
<a name="l00752"></a>00752             <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00753"></a>00753                 gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a1ab637ef25a399c6e69ee770ca7a9b5b">sellingPriceEntry</a>[i], FALSE);
<a name="l00754"></a>00754         }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756         {
<a name="l00757"></a>00757             documentEditor.<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i] = gtk_entry_new();
<a name="l00758"></a>00758             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i], 5, 6, 1
<a name="l00759"></a>00759                     + 2 * (i + 1), 2 + 2 * (i + 1));
<a name="l00760"></a>00760             gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i]), 1);
<a name="l00761"></a>00761             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00762"></a>00762             gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i]), 10);
<a name="l00763"></a>00763             documentEditor.<a class="code" href="structDocumentEditor.html#ae13a89f21584af4f381daf4713e48c1c">discount_insert_text_handler</a>[i]
<a name="l00764"></a>00764                     = g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i]), <span class="stringliteral">&quot;insert_text&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a68b46b5e676a2723192f4d4a5eb53446">DocumentEditor_insert_text_handler_positiveNumeric</a>), &amp;documentEditor);
<a name="l00765"></a>00765             <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00766"></a>00766                 gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a8a82d19db97e100537f8e1e5ab19b111">discountEntry</a>[i], FALSE);
<a name="l00767"></a>00767         }
<a name="l00768"></a>00768 
<a name="l00769"></a>00769         {
<a name="l00770"></a>00770             documentEditor.<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i] = gtk_entry_new();
<a name="l00771"></a>00771             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i], 6, 7, 1
<a name="l00772"></a>00772                     + 2 * (i + 1), 2 + 2 * (i + 1));
<a name="l00773"></a>00773             gtk_entry_set_editable(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i]), FALSE);
<a name="l00774"></a>00774             gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i]), 1);
<a name="l00775"></a>00775             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00776"></a>00776             gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i]), 10);
<a name="l00777"></a>00777             gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a7de3ef7c814b7a0a368abd905dad34a4">finalPriceEntry</a>[i], FALSE);
<a name="l00778"></a>00778         }
<a name="l00779"></a>00779 
<a name="l00780"></a>00780         {
<a name="l00781"></a>00781             documentEditor.<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i] = gtk_entry_new();
<a name="l00782"></a>00782             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i], 7, 8, 1
<a name="l00783"></a>00783                     + 2 * (i + 1), 2 + 2 * (i + 1));
<a name="l00784"></a>00784             gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i]), 1);
<a name="l00785"></a>00785             gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i]), 10);
<a name="l00786"></a>00786             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i]), <span class="stringliteral">&quot;focus-out-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a21188d8da3f9a0b7b8bc139717d5fd74">DocumentEditor_handleFocusOut</a>), &amp;documentEditor);
<a name="l00787"></a>00787             g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i]), <span class="stringliteral">&quot;key-press-event&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#ac6cb97240bd54f50989f514dbcf5e817">DocumentEditor_handleLastEntry</a>), &amp;documentEditor);
<a name="l00788"></a>00788             documentEditor.<a class="code" href="structDocumentEditor.html#a7a79670da58461459aef2d98dc6a3818">rateOfVAT_insert_text_handler</a>[i]
<a name="l00789"></a>00789                     = g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i]), <span class="stringliteral">&quot;insert_text&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a68b46b5e676a2723192f4d4a5eb53446">DocumentEditor_insert_text_handler_positiveNumeric</a>), &amp;documentEditor);
<a name="l00790"></a>00790             <span class="keywordflow">if</span> (typeAction == <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>)
<a name="l00791"></a>00791                 gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#aca9355c39de0995503c0bde7dc4c8827">rateOfVATEntry</a>[i], FALSE);
<a name="l00792"></a>00792         }
<a name="l00793"></a>00793 
<a name="l00794"></a>00794         <span class="keywordflow">if</span> (typeAction != <a class="code" href="group__DocumentEditor.html#ggac02d640352b5046fac70aa514ef3ffa5ac85fa0a5349bb01ba45d56e1fe0aed10" title="It&#39;s a viewing.">DISPLAY_DOCUMENT</a>) {
<a name="l00795"></a>00795             documentEditor.<a class="code" href="structDocumentEditor.html#a76324162e421482fbb2df449598658b3">insertBeforeButton</a>[i] = gtk_button_new_with_label(<span class="stringliteral">&quot;Insérer avant&quot;</span>);
<a name="l00796"></a>00796             g_signal_connect(documentEditor.<a class="code" href="structDocumentEditor.html#a76324162e421482fbb2df449598658b3">insertBeforeButton</a>[i], <span class="stringliteral">&quot;clicked&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#adc2b8be4cfa2bcce89e5669f300c86f1">DocumentEditor_insertBefore</a>),&amp;documentEditor);
<a name="l00797"></a>00797             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a76324162e421482fbb2df449598658b3">insertBeforeButton</a>[i], 8,
<a name="l00798"></a>00798                     9, 2 * (i + 1), 1 + 2 * (i + 1));
<a name="l00799"></a>00799 
<a name="l00800"></a>00800             documentEditor.<a class="code" href="structDocumentEditor.html#a4b107efa5021f3637c9783327ad12731">insertAfterButton</a>[i] = gtk_button_new_with_label(<span class="stringliteral">&quot;Insérer après&quot;</span>);
<a name="l00801"></a>00801             g_signal_connect(documentEditor.<a class="code" href="structDocumentEditor.html#a4b107efa5021f3637c9783327ad12731">insertAfterButton</a>[i], <span class="stringliteral">&quot;clicked&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#ac278d479846e19541df5b11c0cdb5c81">DocumentEditor_insertAfter</a>),&amp;documentEditor);
<a name="l00802"></a>00802             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a4b107efa5021f3637c9783327ad12731">insertAfterButton</a>[i], 9,
<a name="l00803"></a>00803                     10, 2 * (i + 1), 1 + 2 * (i + 1));
<a name="l00804"></a>00804 
<a name="l00805"></a>00805             documentEditor.<a class="code" href="structDocumentEditor.html#a5b6b150eb34bbe5c81b25bad436b67e0">removeButton</a>[i] = gtk_button_new_with_label(
<a name="l00806"></a>00806                     <span class="stringliteral">&quot;Supprimer la ligne courante&quot;</span>);
<a name="l00807"></a>00807             g_signal_connect(documentEditor.<a class="code" href="structDocumentEditor.html#a5b6b150eb34bbe5c81b25bad436b67e0">removeButton</a>[i], <span class="stringliteral">&quot;clicked&quot;</span>, G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a763551e94005c5edce8807c9a6001ccf">DocumentEditor_removeCurrent</a>),&amp;documentEditor);
<a name="l00808"></a>00808             gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a5b6b150eb34bbe5c81b25bad436b67e0">removeButton</a>[i], 8, 10, 1
<a name="l00809"></a>00809                     + 2 * (i + 1), 2 + 2 * (i + 1));
<a name="l00810"></a>00810         } <span class="keywordflow">else</span> {
<a name="l00811"></a>00811             documentEditor.<a class="code" href="structDocumentEditor.html#a76324162e421482fbb2df449598658b3">insertBeforeButton</a>[i] = NULL;
<a name="l00812"></a>00812             documentEditor.<a class="code" href="structDocumentEditor.html#a4b107efa5021f3637c9783327ad12731">insertAfterButton</a>[i] = NULL;
<a name="l00813"></a>00813             documentEditor.<a class="code" href="structDocumentEditor.html#a5b6b150eb34bbe5c81b25bad436b67e0">removeButton</a>[i] = NULL;
<a name="l00814"></a>00814         }
<a name="l00815"></a>00815     }
<a name="l00816"></a>00816 
<a name="l00817"></a>00817     adjustment = gtk_adjustment_new(0, 0, EDITOR_ROWCOUNT, 1, 1, EDITOR_ROWCOUNT);
<a name="l00818"></a>00818     documentEditor.<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a> = gtk_vscrollbar_new(GTK_ADJUSTMENT(adjustment));
<a name="l00819"></a>00819     g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), <span class="stringliteral">&quot;value-changed&quot;</span>,
<a name="l00820"></a>00820             G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#a37b0272a5a2b86a525e9f5a83161367f">DocumentEditor_scrollbarChanged</a>), &amp;documentEditor);
<a name="l00821"></a>00821     g_signal_connect(G_OBJECT(documentEditor.<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>), <span class="stringliteral">&quot;change-value&quot;</span>,
<a name="l00822"></a>00822             G_CALLBACK(<a class="code" href="DocumentEditor_8c.html#ab48928b00520019ae4b9c630b4d07543">DocumentEditor_scrollbarBeforeChange</a>), &amp;documentEditor);
<a name="l00823"></a>00823     gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a4be07f891333c175cb90d11934e697eb">vscrollbar</a>, 10, 11, 2, 2
<a name="l00824"></a>00824             * (EDITOR_ROWCOUNT + 1));
<a name="l00825"></a>00825 
<a name="l00826"></a>00826     <span class="comment">/* totalHT, totalTVA, totalTTC */</span>
<a name="l00827"></a>00827 
<a name="l00828"></a>00828     table = gtk_table_new(3, 2, FALSE);
<a name="l00829"></a>00829     gtk_table_set_row_spacings(GTK_TABLE (table), 4);
<a name="l00830"></a>00830     gtk_table_set_col_spacings(GTK_TABLE (table), 4);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832     alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00833"></a>00833     gtk_container_add(GTK_CONTAINER(alignment), table);
<a name="l00834"></a>00834     gtk_box_pack_start(GTK_BOX (GTK_DIALOG (dialog)-&gt;vbox), alignment, FALSE, FALSE, 0);
<a name="l00835"></a>00835 
<a name="l00836"></a>00836     {
<a name="l00837"></a>00837         label = gtk_label_new(<span class="stringliteral">&quot;Total H.T. :&quot;</span>);
<a name="l00838"></a>00838         alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00839"></a>00839         gtk_container_add(GTK_CONTAINER(alignment), label);
<a name="l00840"></a>00840         gtk_table_attach_defaults(GTK_TABLE (table), alignment, 0, 1, 0, 1);
<a name="l00841"></a>00841         documentEditor.<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a> = gtk_entry_new();
<a name="l00842"></a>00842         gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>, 1, 2, 0, 1);
<a name="l00843"></a>00843         gtk_label_set_mnemonic_widget(GTK_LABEL (label), documentEditor.<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>);
<a name="l00844"></a>00844         gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>), 200);
<a name="l00845"></a>00845         gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>), 1);
<a name="l00846"></a>00846         gtk_entry_set_editable(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>), FALSE);
<a name="l00847"></a>00847         gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>, FALSE);
<a name="l00848"></a>00848         gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#a67e907b697f257beabd3a48c04cc1982">sumWithoutVATEntry</a>), 10);
<a name="l00849"></a>00849     }
<a name="l00850"></a>00850 
<a name="l00851"></a>00851     {
<a name="l00852"></a>00852         label = gtk_label_new(<span class="stringliteral">&quot;Total T.V.A. :&quot;</span>);
<a name="l00853"></a>00853         alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00854"></a>00854         gtk_container_add(GTK_CONTAINER(alignment), label);
<a name="l00855"></a>00855         gtk_table_attach_defaults(GTK_TABLE (table), alignment, 0, 1, 1, 2);
<a name="l00856"></a>00856         documentEditor.<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a> = gtk_entry_new();
<a name="l00857"></a>00857         gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>, 1, 2, 1, 2);
<a name="l00858"></a>00858         gtk_label_set_mnemonic_widget(GTK_LABEL (label), documentEditor.<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>);
<a name="l00859"></a>00859         gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>), 200);
<a name="l00860"></a>00860         gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>), 1);
<a name="l00861"></a>00861         gtk_entry_set_editable(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>), FALSE);
<a name="l00862"></a>00862         gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>, FALSE);
<a name="l00863"></a>00863         gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#ac4e8638e9dad7989ebbaee17e37cf97d">sumOfVATEntry</a>), 10);
<a name="l00864"></a>00864     }
<a name="l00865"></a>00865 
<a name="l00866"></a>00866     {
<a name="l00867"></a>00867         label = gtk_label_new(<span class="stringliteral">&quot;Total T.T.C. :&quot;</span>);
<a name="l00868"></a>00868         alignment = gtk_alignment_new(1, 0, 0, 0);
<a name="l00869"></a>00869         gtk_container_add(GTK_CONTAINER(alignment), label);
<a name="l00870"></a>00870         gtk_table_attach_defaults(GTK_TABLE (table), alignment, 0, 1, 2, 3);
<a name="l00871"></a>00871         documentEditor.<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a> = gtk_entry_new();
<a name="l00872"></a>00872         gtk_table_attach_defaults(GTK_TABLE (table), documentEditor.<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>, 1, 2, 2, 3);
<a name="l00873"></a>00873         gtk_label_set_mnemonic_widget(GTK_LABEL (label), documentEditor.<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>);
<a name="l00874"></a>00874         gtk_entry_set_max_length(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>), 200);
<a name="l00875"></a>00875         gtk_entry_set_alignment(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>), 1);
<a name="l00876"></a>00876         gtk_entry_set_editable(GTK_ENTRY (documentEditor.<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>), FALSE);
<a name="l00877"></a>00877         gtk_widget_set_can_focus(documentEditor.<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>, FALSE);
<a name="l00878"></a>00878         gtk_entry_set_width_chars(GTK_ENTRY(documentEditor.<a class="code" href="structDocumentEditor.html#a2149dd21d6ed0379f7eaa43cd7d5e3b3">sumWithVATEntry</a>), 10);
<a name="l00879"></a>00879     }
<a name="l00880"></a>00880 
<a name="l00881"></a>00881     gtk_widget_show_all(GTK_DIALOG (dialog)-&gt;vbox);
<a name="l00882"></a>00882     <a class="code" href="DocumentEditor_8c.html#ab6d11d1d219e1d60f05a6b8476553f32">DocumentEditor_loadData</a>(&amp;documentEditor, 0);
<a name="l00883"></a>00883 
<a name="l00884"></a>00884     <span class="keywordflow">do</span> {
<a name="l00885"></a>00885         response = gtk_dialog_run(GTK_DIALOG (dialog));
<a name="l00886"></a>00886         <span class="keywordflow">if</span> (response == 1) {
<a name="l00887"></a>00887             <a class="code" href="group__Print.html#gad98ad0399c2fee28e9e7c6d2f74525dd" title="Display a dialog showing a print preview of the document.">Print_preview</a>(document);
<a name="l00888"></a>00888         }
<a name="l00889"></a>00889     } <span class="keywordflow">while</span> (response == 1);
<a name="l00890"></a>00890     gtk_widget_destroy(dialog);
<a name="l00891"></a>00891 
<a name="l00892"></a>00892     <span class="keywordflow">return</span> response == GTK_RESPONSE_OK;
<a name="l00893"></a>00893 }
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="DocumentEditor_8c.html">DocumentEditor.c</a>      </li>
      <li class="footer">Generated on Sun Oct 2 2011 17:15:52 for Travaux pratiques de langage C by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
